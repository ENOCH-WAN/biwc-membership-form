<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membership Registration - Grace Community Church</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <a href="{{ url_for('index') }}" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-church"></i>
                    </div>
                    <div class="logo-text">
                        <h1>Baptist International Worship Centre</h1>
                        <p>BIWC-Kwabenya Membership</p>
                    </div>
                </a>
                <ul class="nav-links">
                    <li><a href="{{ url_for('index') }}">Home</a></li>
                    <li><a href="{{ url_for('register') }}" class="active">Join Us</a></li>
                    <li><a href="{{ url_for('members') }}">Members</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Flash Messages -->
    <div class="container">
        <div class="flash-messages">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="flash {{ category }}">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="section-title">
                <h2>Church Membership Application</h2>
                <p>Please fill out the form below to apply for membership. All fields marked with * are required.</p>
            </div>

            <div class="form-container">
                <form method="POST" action="{{ url_for('register') }}" onsubmit="return validateForm()">
                    <h3 style="color: var(--primary-color); margin-bottom: 2rem; border-bottom: 2px solid var(--light-color); padding-bottom: 0.5rem;">
                        <i class="fas fa-user-circle"></i> Personal Information
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group required">
                            <label for="first_name">First Name</label>
                            <input type="text" id="first_name" name="first_name" class="form-control" required>
                        </div>
                        <div class="form-group required">
                            <label for="last_name">Last Name</label>
                            <input type="text" id="last_name" name="last_name" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group required">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group required">
                            <label for="date_of_birth">Date of Birth (Month & Day)</label>
                            <input type="text" id="date_of_birth" name="date_of_birth" class="form-control" placeholder="MM/DD" required>
                        </div>
                        <div class="form-group required">
                            <label for="gender">Gender</label>
                            <select id="gender" name="gender" class="form-control" required>
                                <option value="">Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                                <option value="Prefer not to say">Prefer not to say</option>
                            </select>
                        </div>
                    </div>
                    
                    <h3 style="color: var(--primary-color); margin: 3rem 0 2rem 0; border-bottom: 2px solid var(--light-color); padding-bottom: 0.5rem;">
                        <i class="fas fa-home"></i> Contact Information
                    </h3>
                    
                    <div class="form-group required">
                        <label for="address">Street Address</label>
                        <input type="text" id="address" name="address" class="form-control" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group required">
                            <label for="city">City</label>
                            <input type="text" id="city" name="city" class="form-control" required>
                        </div>
                        <div class="form-group required">
                            <label for="state">State/Province</label>
                            <input type="text" id="state" name="state" class="form-control" required>
                        </div>
                        <div class="form-group required">
                            <label for="postal_code">Postal Code</label>
                            <input type="text" id="postal_code" name="postal_code" class="form-control" required>
                        </div>
                    </div>
                    
                    <h3 style="color: var(--primary-color); margin: 3rem 0 2rem 0; border-bottom: 2px solid var(--light-color); padding-bottom: 0.5rem;">
                        <i class="fas fa-info-circle"></i> Additional Information
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group required">
                            <label for="marital_status">Marital Status</label>
                            <select id="marital_status" name="marital_status" class="form-control" required>
                                <option value="">Select Status</option>
                                <option value="Single">Single</option>
                                <option value="Married">Married</option>
                                <option value="Divorced">Divorced</option>
                                <option value="Widowed">Widowed</option>
                                <option value="Separated">Separated</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="occupation">Occupation</label>
                            <input type="text" id="occupation" name="occupation" class="form-control">
                        </div>
                    </div>
                    
                    <h3 style="color: var(--primary-color); margin: 3rem 0 2rem 0; border-bottom: 2px solid var(--light-color); padding-bottom: 0.5rem;">
                        <i class="fas fa-phone-alt"></i> Emergency Contact
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group required">
                            <label for="emergency_contact_name">Emergency Contact Name</label>
                            <input type="text" id="emergency_contact_name" name="emergency_contact_name" class="form-control" required>
                        </div>
                        <div class="form-group required">
                            <label for="emergency_contact_phone">Emergency Contact Phone</label>
                            <input type="tel" id="emergency_contact_phone" name="emergency_contact_phone" class="form-control" required>
                        </div>
                    </div>
                    
                    <h3 style="color: var(--primary-color); margin: 3rem 0 2rem 0; border-bottom: 2px solid var(--light-color); padding-bottom: 0.5rem;">
                        <i class="fas fa-pray"></i> Spiritual Information
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group required">
                            <label for="spiritual_status">Spiritual Status</label>
                            <select id="spiritual_status" name="spiritual_status" class="form-control" required>
                                <option value="">Select Status</option>
                                <option value="New Believer">New Believer</option>
                                <option value="Growing Christian">Growing Christian</option>
                                <option value="Mature Christian">Mature Christian</option>
                                <option value="Seeking">Seeking/Exploring</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="baptism_date">Baptism Date (if applicable)</label>
                            <input type="date" id="baptism_date" name="baptism_date" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="previous_church">Previous Church (if any)</label>
                        <input type="text" id="previous_church" name="previous_church" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="skills_interests">Skills, Talents, or Ministry Interests</label>
                        <textarea id="skills_interests" name="skills_interests" class="form-control" rows="4" placeholder="E.g., Music, Teaching, Youth Ministry, Hospitality, etc."></textarea>
                    </div>
                    
                    <div style="background-color: #f8f9fa; padding: 1.5rem; border-radius: var(--border-radius); margin: 2rem 0;">
                        <h4 style="color: var(--primary-color); margin-bottom: 1rem;">
                            <i class="fas fa-handshake"></i> Membership Commitment
                        </h4>
                        <p style="margin-bottom: 1rem;">
                            By submitting this form, I affirm my desire to join Grace Community Church as a member.
                            I commit to participating in the life of the church, supporting its ministries,
                            and growing together with this community in faith and service.
                        </p>
                        <div class="form-group required">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="checkbox" id="commitment" name="commitment" required style="margin-right: 10px;">
                                <span>I understand and agree to the membership commitment above</span>
                            </label>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 3rem;">
                        <button type="submit" class="cta-button" style="font-size: 1.2rem; padding: 1rem 3rem;">
                            <i class="fas fa-paper-plane"></i> Submit Application
                        </button>
                        <p style="margin-top: 1rem; color: var(--text-light); font-size: 0.9rem;">
                            You will receive a confirmation email upon successful submission.
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Baptist International Worship Centre</h3>
                    <p>Kwabenya - Pokuase Street<br>
                    Opposite Puma Filling Station<br>
                    Accra, Ghana</p>
                </div>
                <div class="footer-section">
                    <h3>Need Help?</h3>
                    <p><i class="fas fa-phone"></i> 233 547265306</p>
                    <p><i class="fas fa-envelope"></i> members@biwckwabenyas.org</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <p><a href="{{ url_for('index') }}" style="color: white; text-decoration: none;">Home</a></p>
                    <p><a href="{{ url_for('members') }}" style="color: white; text-decoration: none;">Member Directory</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Baptist International Worship Centre (BIWC-Kwabenya). All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Form validation
        function validateForm() {
            const requiredFields = document.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    field.style.borderColor = '#ddd';
                }
            });
            
            // Validate email format
            const emailField = document.getElementById('email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailField.value && !emailRegex.test(emailField.value)) {
                emailField.style.borderColor = '#e74c3c';
                alert('Please enter a valid email address.');
                isValid = false;
            }
            
            if (!isValid) {
                alert('Please fill in all required fields.');
            }
            
            return isValid;
        }
        
        // Date restriction for date of birth (must be at least 13 years old)
        document.addEventListener('DOMContentLoaded', function() {
            const dobField = document.getElementById('date_of_birth');
            const today = new Date();
            const minDate = new Date(today.getFullYear() - 120, today.getMonth(), today.getDate()); // 120 years ago
            const maxDate = new Date(today.getFullYear() - 13, today.getMonth(), today.getDate()); // 13 years ago
            
            dobField.min = minDate.toISOString().split('T')[0];
            dobField.max = maxDate.toISOString().split('T')[0];
            
            // Set today's date as max for baptism date
            const baptismField = document.getElementById('baptism_date');
            if (baptismField) {
                baptismField.max = today.toISOString().split('T')[0];
            }
        });
    </script>
</body>
</html>